<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Assistente Virtual de Sa√∫de ‚Äî UBS (Problemas nos Rins)</title>
<link rel="icon" href="data:,">
<style>
:root{
  --bg:#f8fafc; --card:#ffffff; --accent:#0b76d1; --danger:#c22b2b; --text:#052033; --muted:#6b7280;
  --radius:12px; --shadow:0 8px 30px rgba(15,23,42,0.06); font-family:Inter,system-ui, -apple-system, "Segoe UI", Roboto;
}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;}
.container{max-width:1000px;margin:28px auto;padding:20px;}
header{display:flex;gap:14px;align-items:center;margin-bottom:18px;}
.logo{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#3ec7ff);color:white;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:20px;box-shadow:var(--shadow)}
h1{margin:0;font-size:20px}
.lead{margin:0;color:var(--muted);font-size:13px}
.card{background:var(--card);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);display:grid;grid-template-columns:1fr 360px;gap:18px;min-height:640px;overflow:hidden;}
.chat{display:flex;flex-direction:column;gap:12px;}
.messages{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:12px}
.bubble{max-width:86%;padding:13px 14px;border-radius:12px;background:#f1f5f9;border:1px solid #e6eef7;line-height:1.45}
.bubble.bot{align-self:flex-start}
.bubble.user{align-self:flex-end;background:linear-gradient(180deg,#e6f6ff,#ffffff);border:1px solid rgba(11,118,209,0.08);color:#03223b}
.options{display:flex;flex-wrap:wrap;gap:10px;margin-top:8px}
.btn{padding:10px 14px;border-radius:10px;border:1px solid rgba(11,118,209,0.12);background:white;color:var(--accent);font-weight:700;cursor:pointer}
.btn.secondary{border:1px solid rgba(0,0,0,0.06);color:var(--text);background:#fbfeff}
.btn.warn{background:linear-gradient(90deg,var(--danger),#ff706e);color:white;border:0}
.panel{background:linear-gradient(180deg,#ffffff,#fbfeff);border-radius:10px;padding:14px;display:flex;flex-direction:column;gap:12px;border:1px solid rgba(2,6,23,0.03)}
.panel h3{margin:0;font-size:16px}
.info{font-size:14px;color:var(--muted);line-height:1.45}
.emergency{background:linear-gradient(90deg,var(--danger),#ff6b6b);padding:12px;border-radius:10px;color:white;font-weight:800;line-height:1.3;display:none}
.call{display:inline-block;padding:10px 12px;border-radius:10px;background:#04293b;color:white;text-decoration:none;font-weight:800}
.floating{position:fixed;right:18px;bottom:18px;background:var(--danger);color:white;padding:12px 14px;border-radius:999px;font-weight:800;text-decoration:none;display:none;z-index:999}
.footer{font-size:13px;color:var(--muted);text-align:center;margin-top:12px}
@media (max-width:980px){.card{grid-template-columns:1fr;min-height:760px}.panel{order:2}}
</style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">UBS</div>
      <div>
        <h1>Assistente Virtual de Sa√∫de ‚Äî UBS (Problemas nos Rins)</h1>
        <p class="lead">Triagem inicial ‚Äî fluxo interativo por bot√µes (passo a passo).</p>
      </div>
    </header>

    <main class="card" role="main" aria-live="polite">
      <section class="chat" aria-label="Chat">
        <div id="messages" class="messages" aria-live="polite" aria-atomic="false"></div>
        <div id="options" class="options" aria-hidden="false"></div>
      </section>

      <aside class="panel" aria-label="Informa√ß√µes e contatos">
        <h3>Contatos e Endere√ßos</h3>
        <div class="info">
          <strong>SAMU:</strong> 192<br>
          <strong>Pronto Atendimento 24h ‚Äî</strong> Rua L-2, 190, Interlagos, Para√≠so do Tocantins<br>
          <strong>Hospital Regional ‚Äî</strong> Rua 03, Setor Aeroporto
        </div>

        <div>
          <h3>Como usar</h3>
          <div class="info">Escolha as op√ß√µes com os bot√µes. O assistente mostrar√° uma mensagem por vez e guiar√° o fluxo conforme suas respostas.</div>
        </div>

        <div id="panelEmergency" class="emergency" aria-hidden="true"></div>
        <div style="margin-top:auto">
          <a id="panelCall" class="call" href="tel:192" style="display:none" aria-hidden="true">üìû Ligar 192 (SAMU)</a>
        </div>
      </aside>
    </main>

    <div class="footer">Se for emerg√™ncia real, ligue para SAMU: <strong>192</strong></div>
  </div>

  <a id="floatingCall" class="floating" href="tel:192" aria-hidden="true">üìû Ligar 192</a>

<script>
const messages = document.getElementById('messages');
const options = document.getElementById('options');
const panelEmergency = document.getElementById('panelEmergency');
const panelCall = document.getElementById('panelCall');
const floatingCall = document.getElementById('floatingCall');

function bot(text){ const d=document.createElement('div'); d.className='bubble bot'; d.innerHTML = text; messages.appendChild(d); messages.scrollTop = messages.scrollHeight; return d; }
function user(text){ const d=document.createElement('div'); d.className='bubble user'; d.innerHTML = '<strong>Voc√™:</strong> ' + text; messages.appendChild(d); messages.scrollTop = messages.scrollHeight; return d; }
function clearOptions(){ options.innerHTML=''; }
function setOptions(arr){ clearOptions(); if(!arr) return; arr.forEach(o=>{ const b=document.createElement('button'); b.className = o.style==='warn' ? 'btn warn' : (o.style==='secondary' ? 'btn secondary' : 'btn'); b.textContent = o.label; b.onclick = ()=> handle(o.id,o.label); options.appendChild(b); }); }
function showEmergency(html){ panelEmergency.style.display='block'; panelEmergency.innerHTML = html; panelEmergency.setAttribute('aria-hidden','false'); panelCall.style.display='inline-block'; panelCall.setAttribute('aria-hidden','false'); floatingCall.style.display='inline-block'; floatingCall.setAttribute('aria-hidden','false'); }
function hideEmergency(){ panelEmergency.style.display='none'; panelEmergency.setAttribute('aria-hidden','true'); panelCall.style.display='none'; panelCall.setAttribute('aria-hidden','true'); floatingCall.style.display='none'; floatingCall.setAttribute('aria-hidden','true'); }

// Script specifically for "Problemas nos Rins (Lit√≠ase)" - step-by-step
const SCRIPT = {
  greeting: "üëã Ol√°, seja bem-vindo(a)! Eu sou assistente virtual de sa√∫de.<br>Vamos conversar sobre <strong>problemas nos rins (lit√≠ase urin√°ria)</strong>.",
  q_pain: "Voc√™ est√° apresentando dor lombar intensa, em c√≥lica, que pode irradiar para abdome inferior ou regi√£o genital?",
  no_pain: "Tudo bem! Caso apresente dor s√∫bita e forte na regi√£o lombar, procure atendimento m√©dico. Atualmente, n√£o h√° sinais de c√≥lica renal.",
  consider: "Isso pode ser um quadro de c√≥lica renal por lit√≠ase urin√°ria (pedra nos rins). Antes de prosseguirmos, preciso saber: Voc√™ apresenta algum destes sinais de gravidade?",
  signs_list: "<ul><li>Febre (&gt; 38¬∫C)</li><li>N√°useas ou v√¥mitos persistentes</li><li>Dificuldade ou impossibilidade de urinar</li><li>Sangue vis√≠vel na urina (hemat√∫ria macrosc√≥pica intensa)</li><li>Dor insuport√°vel que n√£o melhora com analg√©sicos</li></ul>",
  emergency: "üö® Isso √© uma emerg√™ncia! Ligue imediatamente para o SAMU (192) ou v√° ao pronto-socorro mais pr√≥ximo (Pronto Atendimento 24 horas em Para√≠so do Tocantins: Rua L-2, 190, Interlagos). Risco de complica√ß√£o grave, como infec√ß√£o urin√°ria obstrutiva ou insufici√™ncia renal aguda.",
  emergency_addresses: "<strong>Endere√ßos de refer√™ncia:</strong><br>Pronto Atendimento 24h ‚Äî Rua L-2, 190, Interlagos, Para√≠so do Tocantins<br>Hospital Regional ‚Äî Rua 03, Setor Aeroporto",
  no_emergency_advice: "O quadro pode ser uma c√≥lica renal sem sinais de complica√ß√£o.<br><strong>Recomenda√ß√µes:</strong><ul><li>Beba bastante √°gua (se n√£o houver contraindica√ß√£o).</li><li>Use analg√©sicos simples conforme orienta√ß√£o m√©dica.</li><li>Procure atendimento m√©dico para confirmar o diagn√≥stico e realizar exames de imagem (ultrassom ou tomografia).</li><li>Retorne imediatamente ao pronto-socorro se surgirem febre, v√¥mitos persistentes, dificuldade para urinar ou dor que n√£o melhora.</li></ul>",
  q_history: "Voc√™ j√° teve pedra nos rins antes?",
  history_yes: "Entendi. Pessoas que j√° tiveram c√°lculos t√™m alto risco de recorr√™ncia. √â importante acompanhamento m√©dico regular, exames de imagem e ajustes na dieta.",
  history_no: "Ok! Esse pode ser o seu primeiro epis√≥dio, mas ainda assim precisa de avalia√ß√£o m√©dica.",
  q_urine_symptoms: "Voc√™ est√° sentindo dor ao urinar, vontade de urinar muitas vezes, sangue na urina ou febre?",
  urine_yes: "Entendi. Esses sinais podem indicar algo que precisa de aten√ß√£o m√©dica. Se a dor for forte ou tiver sangue na urina, procure atendimento m√©dico o quanto antes. Quer que eu te mostre cuidados b√°sicos at√© chegar ao posto?",
  urine_no: "√ìtimo. Se for apenas d√∫vida sobre sa√∫de dos rins, posso te dar dicas para preven√ß√£o: beber bastante √°gua, evitar excesso de sal e controlar press√£o e diabetes.",
  basic_care: "<strong>Cuidados b√°sicos at√© chegar ao atendimento:</strong><ul><li>Mantenha a pessoa em posi√ß√£o confort√°vel.</li><li>Se houver n√°useas, ofere√ßa pequenas quantidades de l√≠quido se tolerado.</li><li>Evite dar anti-inflamat√≥rios fortes sem orienta√ß√£o m√©dica.</li><li>Se houver sangramento intenso ou dificuldade para urinar, procure o pronto-socorro imediatamente.</li></ul>",
  prevention: "<strong>Dicas de preven√ß√£o:</strong><ul><li>Beber √°gua regularmente (meta individualizada).</li><li>Evitar excesso de sal e alto consumo de prote√≠nas animais.</li><li>Controlar press√£o arterial e glicemia.</li><li>Manter acompanhamento com equipe de sa√∫de se houver hist√≥rico de c√°lculos.</li></ul>"
};

// Nodes for the kidneys flow (detailed)
const NODES = {
  start: { bot: SCRIPT.greeting, options: [{id:'start_rins', label:'üíß Problemas nos rins (Lit√≠ase)'}] },
  start_rins: { bot: SCRIPT.q_pain, options: [{id:'rins_no', label:'N√£o'}, {id:'rins_yes', label:'Sim'}] },
  rins_no: { bot: SCRIPT.no_pain, options: [{id:'rins_back', label:'Voltar ao in√≠cio'}, {id:'rins_prev', label:'Dicas de preven√ß√£o'}] },
  rins_prev: { bot: SCRIPT.prevention, options: [{id:'rins_back', label:'Voltar ao in√≠cio'}] },
  rins_back: { bot: SCRIPT.greeting, options: [{id:'start_rins', label:'üíß Problemas nos rins (Lit√≠ase)'}] },
  rins_yes: { bot: SCRIPT.consider + '<br>' + SCRIPT.signs_list, options: [{id:'rins_signs_yes', label:'Apresento um ou mais sinais'}, {id:'rins_signs_no', label:'N√£o apresento sinais'}] },
  rins_signs_yes: { bot: SCRIPT.emergency, emergency:true, options: [{id:'rins_em_next', label:'Entendi ‚Äî e agora?'}, {id:'rins_back', label:'Voltar ao in√≠cio'}] },
  rins_em_next: { bot: SCRIPT.emergency + '<br><br>' + SCRIPT.emergency_addresses, emergency:true, options: [{id:'rins_follow', label:'Recomenda√ß√µes at√© chegar'}, {id:'rins_back', label:'Voltar ao in√≠cio'}] },
  rins_signs_no: { bot: SCRIPT.no_emergency_advice, options: [{id:'rins_history_q', label:'J√° tive pedra nos rins'}, {id:'rins_first_q', label:'Primeira vez'}, {id:'rins_urine_q', label:'Tenho sintomas urin√°rios'}] },
  rins_history_q: { bot: SCRIPT.q_history, options: [{id:'rins_history_yes', label:'Sim'}, {id:'rins_history_no', label:'N√£o'}] },
  rins_history_yes: { bot: SCRIPT.history_yes, options: [{id:'rins_follow', label:'Recomenda√ß√µes'}, {id:'rins_back', label:'Voltar ao in√≠cio'}] },
  rins_history_no: { bot: SCRIPT.history_no, options: [{id:'rins_follow', label:'Recomenda√ß√µes'}, {id:'rins_back', label:'Voltar ao in√≠cio'}] },
  rins_urine_q: { bot: SCRIPT.q_urine_symptoms, options: [{id:'rins_urine_yes', label:'Sim'}, {id:'rins_urine_no', label:'N√£o'}] },
  rins_urine_yes: { bot: SCRIPT.urine_yes, options: [{id:'rins_show_basic', label:'Mostrar cuidados b√°sicos'}, {id:'rins_back', label:'Voltar ao in√≠cio'}] },
  rins_show_basic: { bot: SCRIPT.basic_care, options: [{id:'rins_follow', label:'Recomenda√ß√µes e seguimento'}, {id:'rins_back', label:'Voltar ao in√≠cio'}] },
  rins_urine_no: { bot: SCRIPT.urine_no, options: [{id:'rins_follow', label:'Dicas de preven√ß√£o'}, {id:'rins_back', label:'Voltar ao in√≠cio'}] },
  rins_follow: { bot: '<strong>Recomenda√ß√µes e seguimento:</strong><br>- Procurar avalia√ß√£o m√©dica para exames (urina, creatinina, imagem).<br>- Hidrata√ß√£o adequada conforme orienta√ß√£o m√©dica.<br>- Revis√£o de dieta e, se indicado, estudo metab√≥lico para preven√ß√£o de recidiva.', options: [{id:'rins_back', label:'Voltar ao in√≠cio'}] }
};

function render(nodeId){
  const node = NODES[nodeId];
  if(!node) return;
  if(node.bot) bot(node.bot);
  if(node.emergency){
    showEmergency('üö® EMERG√äNCIA ‚Äî Ligue 192 ou dirija-se ao pronto-socorro imediatamente.<br><br><strong>Endere√ßos:</strong><br>Pronto Atendimento 24h ‚Äî Rua L-2, 190, Interlagos, Para√≠so do Tocantins<br>Hospital Regional ‚Äî Rua 03, Setor Aeroporto');
    bot('üö® <strong>Emerg√™ncia:</strong> ligue 192 ou dirija-se ao pronto-socorro agora.<br><a href="tel:192" class="btn warn" style="display:inline-block;margin-top:8px;text-decoration:none">üìû Ligar 192 (SAMU)</a>');
  } else {
    hideEmergency();
  }
  setOptions(node.options);
}

function start(){ messages.innerHTML=''; hideEmergency(); bot(SCRIPT.greeting); setOptions(NODES.start.options); }
function setOptions(arr){ options.innerHTML=''; if(!arr) return; arr.forEach(o=>{ const b=document.createElement('button'); b.className='btn'; b.textContent = o.label; b.onclick = ()=> { user(o.label); render(o.id); }; options.appendChild(b); }); messages.scrollTop = messages.scrollHeight; }
function handle(id,label){ user(label); render(id); }
start();
</script>
</body>
</html>
